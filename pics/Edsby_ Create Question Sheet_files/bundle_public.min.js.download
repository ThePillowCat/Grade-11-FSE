/**
 * Version: baf4caef7b0dd7471dd76c3dc5db25e58fe75145ce31e12f9f3da02c27b2a1fb
 * Bundle: public
 **/

cf.resources.confirm('bundle_public', function() {

/* resources: loginform */

"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}cf.resource("loginform",function(e,t,n,r){var o;function a(n,r){var o,a,i=t.cordova,l=t.Core4Plugin,s=n.get_xdo("*remember"),d=s&&s.val()?"&keep=1":"";if(n.e&&"onload"!==n.e.type&&(n.e.stopPropagation(),n.e.preventDefault()),r+=d,t.cfNative&&i&&i.InAppBrowser||t.EdsbyReactBridge&&t.EdsbyReactBridge.openAuth){a=r.replace(/node\.json\/([0-9]+)/,"node.json/"),o=e.tpl("{{href}}&post_login_url={{redirect}}",{href:a,redirect:encodeURIComponent(e.tpl("{{loadP}}{{xds}}?ts={{ts}}&ver={{ver}}&platform={{platform}}",{loadP:e.gbl.loadP,xds:"HandoffToNative",ts:(new Date).getTime(),ver:t.EdsbyReactBridge?2:1,platform:e.platform.android?"android":"ios"}))});var u=function(){i.InAppBrowser.open(o,"_system")};t.EdsbyReactBridge&&t.EdsbyReactBridge.openAuth?(t.EdsbyReactBridge.openAuth(o),n.preventDefault(),n.stopPropagation()):i.plugins.browsertab&&i.plugins.browsertab.isAvailable?i.plugins.browsertab.isAvailable(function(e){e?i.plugins.browsertab.openUrl(o,function(e){},function(e){u()}):u()},function(e){u()}):u()}else l&&l.showWebView?l.showWebView(r,function(){},function(){},function(){e.notif.fetchBootstrap(function(t){n.newEvent("loadPage",{xds:e.gbl.user.base,nid:e.gbl.user.nid})},!0)}):t.location=r}return o={types:{f_hostInput:function(e){var t=n.location.hostname.split(".");4!==t.length||isNaN(parseInt(t[0],10))||isNaN(parseInt(t[1],10))||isNaN(parseInt(t[2],10))||isNaN(parseInt(t[3],10))?e.data=t[0]:e.data=n.location.hostname,e.inherit("f_hidden")},hashtest:function(t){var n=t.arg("testval"),r=e.get_module("crypt")[t.arg("alg")]();return r.Update(n),r.Final(),r.ResultStr(),t.arg("refhash"),t.exitBlank(!0)},integrations:function(){return function(e){if(!function e(t){for(var n=Object.entries(t),r=0;r<n.length;r++){var o=_slicedToArray(n[r],2),a=o[0],i=o[1];if("object"===_typeof(i)&&e(i))return!0;if(("enabled"===a||"auth"===a)&&i)return!0}}(e.data))return e.exitBlank(!0)}}(),integrationlink:function(t){var n,r=t.get_val("buttonclass"),a=t.arg("integration");if(!t.get_val("auth")&&!t.get_val("enabled"))return!1;if(t.map(t.data),t.get_val("text")||(!t.data&&(t.data={}),t.data.defaulttext=t.arg("tooltip")),r&&t.addClass(r),t.get_val("instance")&&(a+="_"+encodeURIComponent(t.get_val("instance"))),t.proxyCSS="loginform-types-integrationlink",t.posttag('<div class="loginform-types-integrationlink-inner">'),t.preclosetag("</div>"),t.temp.href=e.tpl(e.gbl.node,{})+t.nid()+"?xds="+(t.arg("xds")||"launchauthintegration")+"&integration="+a,t.arg("href",t.temp.href),t.on("click",o.events.clickintegrationlink),!(n=t.get_val("text")||t.get_val("defaulttext"))){var i=t.xds.fields.text;i&&(n=i.defaultValue)}n&&(n=e.tpl(e.lang("Log in using {{service}}"),{service:n}),t.addAttr("aria-label",n)),t.arg("noMobileDefaultHandler",!0),t.inherit("link")},integrationlinktext:function(e){e.get_val()||(e.displayVal=e.get_val("defaulttext")||e.arg("defaultValue")),e.tag("div")}},events:{clickintegrationlink:function(e,t,n){a(e,e.temp.href)},doForgotPassword:function(t,n,o){var a,i,l,s=n.parents("form");t.key=function(){return t.build.slice._formkey},s.length&&(a=$(s[0].elements["login-userid"])),a&&a.length&&(i=$(a.parents(".xds-field")[0]))&&(l=a.val()),i&&i.length&&l===i.xds.xds.placeholder&&(l=r),l!==r&&0===l.length&&(l=r),t.args.data={body:{userid:l}},e.platform.phone&&(t.args.mobileForceLightboxSledgehammer=!0),e.get_func("lightbox")(t,n,o)},doPublicAutoreg:function(t,n,r){t.args={xds:t.arg("xds")||"Register",nid:t.get_val("nid","user")},e.get_func("loadPage")(t,n)},forgotPWConfirm:function(t,n,r){n.parents("form").find("[name="+r.errorfield+"]").parents(".xds-field").after(e.html.div(r.errorstr,[e.css.validateMsg,e.css.validateMsgError,t.e.id])).siblings(e.$css.validateMsg).hide().fadeIn()},forgotPWOnLoad:function(e,t,n){e.parents(".hidden").removeClass("hidden")},launch_link_external:function(t,n,r){var o=t.state.get("launchurl");o?a(t,e.mlunescape(o)):t.removeClass("hidden")},loadForgotPW:function(e,t,n){var r=e.state.get("vkey"),o=e.state.get("unid");e.get_perm("forgotpasswordform")&&r?e.event("loadxds",{data:{unid:o,password:r}}):e.removeClass("hidden")},processReturn:function(t,n,r){r.continueURL?t.newEvent("loadPage",{href:r.continueURL}):(r.postLoginURL&&(e.gbl.routing={href:r.postLoginURL,target:e.gbl.page}),t.event("login"))},processReturnFP:function(t,n,r){r.continueURL?t.newEvent("loadPage",{href:r.continueURL}):(delete e.gbl.routing,e.notif.userChanged())},selectServer:function(n,r,o){try{t.Core4Plugin.checkpoint({checkpoint:"Changing Server From: "+e.gbl.host})}catch(e){}localStorage.removeItem("selectedServer"),t.location.reload()}}}});

/* resources: scrollingNews */

"use strict";cf.resource("scrollingNews",function(t,i,e,r){var o={},a={};function d(t){var i,e;if(t===r)return r;if(i=o[t.path],e=t.get_val(t.arg("itemLocation")).map(function(i){return t.get_node(i.nid)[0]}),i===r){var a=0,d=!0,n=!1,l=r;try{for(var f,s=e[Symbol.iterator]();!(d=(f=s.next()).done);d=!0){var g=f.value;if(g&&g.dom()){a=g.dom().outerWidth(!0);break}}}catch(t){n=!0,l=t}finally{try{d||null==s.return||s.return()}finally{if(n)throw l}}(i=o[t.path]={currLeftPosition:0,boxWidth:t.parent_xdo().dom().innerWidth(),totalWidth:t.dom()[0].scrollWidth,itemWidth:a,dragData:{dragging:!1,dragX:0,dragged:!1}}).partialHiddenRight=i.itemWidth-i.boxWidth%i.itemWidth,i.partialHiddenLeft=0}return i}function n(t,i,e){var r,o=d(t),a=t.e;o.dragData.dragging&&(r="touchmove"==a.type?a.originalEvent.changedTouches[0].pageX:a.pageX,a.preventDefault(),o.currLeftPosition+=o.dragData.dragX-r,o.currLeftPosition+o.boxWidth>o.totalWidth?o.currLeftPosition=o.totalWidth-o.boxWidth:o.currLeftPosition<0&&(o.currLeftPosition=0),t.dom().css("left",-1*o.currLeftPosition),o.dragData.dragX=r,o.dragData.dragged=!0,f.fn.verifyArrows(t,i,e))}function l(t,i,e){var r=d(t);r.dragData.dragging&&(t.off("mousemove",n),t.off("mouseup",l),t.off("mouseleave",l),t.off("touchmove",n),t.off("touchend",l),t.off("touchleave",l),t.off("touchcancel",l),r.dragData.dragging=!1,r.partialHiddenLeft=r.currLeftPosition%r.itemWidth,r.partialHiddenRight=r.itemWidth-(r.currLeftPosition+r.boxWidth)%r.itemWidth,r.dragData.dragged&&(t.e.stopPropagation(),r.dragData.dragged=!1,t.e.preventDefault()))}var f={types:{newsitem:function(i){var e=i.get_val("pic"),r=t.get("files");if(e&&e.ContentType&&e.ContentType.startsWith("image/")){var o=r._getFilePublicThumbnailUrl(i,!1,e,"M");o||(o=r.getImageDownloadUrl(i,i.nid(),"orig","file",i.arg("xds"))),o&&(i.addStyle("background-image","url(".concat(o,")")),i.addStyle("background-size","cover"),i.addStyle("background-position","center"))}else i.exitBlank()},newsbox:function(i){var e=t.get("windows");if(e&&e._available&&!a._poller){var r=function(i){var r=[];for(var o in i.item)if(o&&i.item.hasOwnProperty(o)&&i.item[o].pnid){var a=i.item[o];r.push({uri:t.tpl("{{dl}}{{pnid}}/{{rid}}/{{nid}}?field=file&xds=fileThumbnail&size=310,310",{dl:t.gbl.dl,pnid:a.pnid,rid:a.rid,nid:a.nid}),text:a.title,tag:"NID"+a.nid})}e.batch(r)};a._poller=t.notif.Poller({url:{nid:i.nid(),xds:"scrollingNews"},dataOnly:!0,callback:function(t){r(t.boxLayout.newsbox)}}),r(i.data)}}},fn:{pageArrow:function(t,i,e){var r=t.parent_xdo().get_xdo("*newsbox"),o=d(r),a=parseInt(t.args.delta,10),n=0;if(a>0){if(o.currLeftPosition>=o.totalWidth-o.boxWidth)return void(o.currLeftPosition=o.totalWidth-o.boxWidth);o.partialHiddenRight>0?(n=o.partialHiddenRight<.25*o.itemWidth&&o.totalWidth>o.currLeftPosition+o.boxWidth+o.partialHiddenRight?o.partialHiddenRight+o.itemWidth:o.partialHiddenRight,o.partialHiddenRight=0,o.partialHiddenLeft=(o.partialHiddenLeft+n)%o.itemWidth):n=o.itemWidth}else if(a<0){if(o.currLeftPosition<=0)return void(o.currLeftPosition=0);o.partialHiddenLeft>0?(n=o.partialHiddenLeft<.25*o.itemWidth&&o.currLeftPosition-o.partialHiddenLeft>0?o.partialHiddenLeft+o.itemWidth:o.partialHiddenLeft,o.partialHiddenLeft=0,o.partialHiddenRight=(o.partialHiddenRight+n)%o.itemWidth):n=o.itemWidth}o.currLeftPosition+=n*a,r.dom().stop().animate({left:-1*o.currLeftPosition},500),f.fn.verifyArrows(t,i,e)},verifyArrows:function(t,i,e){var r=d(t.get_xdo("*newsbox")),o=t.get_xdo("*leftArrow"),a=t.get_xdo("*rightArrow");o&&a&&(o[r.currLeftPosition<=0?"addClass":"removeClass"]("xds-scrollingNewsArrow-inactive"),a[r.currLeftPosition+r.boxWidth>=r.totalWidth?"addClass":"removeClass"]("xds-scrollingNewsArrow-inactive"),r.boxWidth>=r.totalWidth?(o.dom().hide(),a.dom().hide()):(o.dom().show(),a.dom().show()))},handleResize:function(t,i,e){var r,o=t.get_xdo("*newsbox"),a=d(o);r=a.boxWidth,a.boxWidth=o.parent_xdo().dom().innerWidth(),a.partialHiddenRight=a.itemWidth-(a.currLeftPosition+a.boxWidth)%a.itemWidth,a.currLeftPosition+a.boxWidth>a.totalWidth&&(a.boxWidth>=a.totalWidth?(a.partialHiddenLeft=0,a.partialHiddenRight=0,a.currLeftPosition=0):(a.currLeftPosition-=a.boxWidth-r,a.partialHiddenLeft=a.currLeftPosition%a.itemWidth,a.partialHiddenRight=0,o.dom().css("left",-1*a.currLeftPosition))),f.fn.verifyArrows(t,i,e)},startScrollDrag:function(i,e,r){if(t.layout.isPhone())return!0;var o=d(i);o.boxWidth>=o.totalWidth||(o.dragData.dragging=!0,"touchstart"==i.e.type?o.dragData.dragX=i.e.originalEvent.changedTouches[0].pageX:o.dragData.dragX=i.e.pageX,i.on("mousemove",n),i.on("mouseup",l),i.on("mouseleave",l),i.on("touchmove",n),i.on("touchend",l),i.on("touchleave",l),i.on("touchcancel",l))}}};return f});
});
