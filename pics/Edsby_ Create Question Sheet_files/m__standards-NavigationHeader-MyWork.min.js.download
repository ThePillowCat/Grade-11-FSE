/*
Copyright CoreFour Inc.
Version: baf4caef7b0dd7471dd76c3dc5db25e58fe75145ce31e12f9f3da02c27b2a1fb
Compiled: 1674920004
*/
cf.resources.confirm("m__standards-NavigationHeader-MyWork", function(){

/*standards*/
"use strict";cf.module("standards",function(a,d,t,r){return{construct: function  standards_construct(a){var d={standardsTree:{},flatStandards:{},leaves:{},depth:0,displayDepth:0,ParseStandards: function  standards_ParseStandards(a){var d={},t={},r={},n=0,e=0;for(var s in a){var l=a[s],i=l.fullcode.split(":")[0];t[l.fullcode]=l;var o=l.name.split(".");o.unshift(i),n=Math.max(n,o.length);for(var f=d,c=0;c<o.length;c++){var u=o[c];f[u]||(f[u]={children:{}},u===i&&(f[u].body="",f[u].code=u,f[u].fullcode=u,f[u].course=i,f[u].courseRoot=!0)),c==o.length-1&&(f[u].body=l.title,f[u].code=l.name,f[u].nid=l.nid,f[u].fullcode=l.fullcode,f[u].course=i),f=f[u].children}}for(var h=[{children:d,depth:0}],v={};h.length>0;){var p=h.pop(),S=p.code&&v[p.code]?v[p.code]:0,y=p.children?Object.keys(p.children).length:0;for(var m in p.children){var b=p.children[m];h.push(b),v[b.code]=S+1,b.depth=p.depth+1}0===y&&(r[p.fullcode]=p)}for(var T in v)e=Math.max(e,v[T]);return{tree:d,flat:t,depth:n,displayDepth:e,leaves:r,course:i}},nidToStandard: function  standards_nidToStandard(a){for(var d in this.flatStandards){if(this.flatStandards[d].nid==a)return{body:this.flatStandards[d].title,code:this.flatStandards[d].name,nid:this.flatStandards[d].nid,fullcode:this.flatStandards[d].fullcode}}},fullcodeToStandard: function  standards_fullcodeToStandard(a){return this.flatStandards[a]&&this.flatStandards[a].fullcode===a?{body:this.flatStandards[a].title,code:this.flatStandards[a].name,nid:this.flatStandards[a].nid,fullcode:this.flatStandards[a].fullcode}:{body:"",code:a,fullcode:a,foreign:!0}},MapAssessmentsToStandards: function  standards_MapAssessmentsToStandards(a){var d={};for(var t in a){var r=a[t];for(var n in r.standards)d[r.standards[n]]||(d[r.standards[n]]=[]),d[r.standards[n]].push(r)}return d},MapObservationsToStandards: function  standards_MapObservationsToStandards(a){var d={};for(var t in a){var r=a[t];if(r.standards){var n=r.standards.split(",");for(var e in n)d[n[e]]||(d[n[e]]=[]),d[n[e]].push(r)}}return d},MapEvidenceToStandards: function  standards_MapEvidenceToStandards(a){var d={};for(var t in a){var r=a[t];if(r.fullStandards){var n=r.fullStandards.split(",");for(var e in n)d[n[e]]||(d[n[e]]=[]),d[n[e]].push(r)}}return d}};if(a){var t=d.ParseStandards(a);d.standardsTree=t.tree,d.flatStandards=t.flat,d.depth=t.depth,d.displayDepth=t.displayDepth,d.leaves=t.leaves,d.course=t.course}return d}}});

/*NavigationHeader*/
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}cf.resource("NavigationHeader",function(t,e,o){return new(function(e){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).call(this,"NavigationHeader",{header:function(t){}},{myevent:function(t){}},{},{},{}))}return _inherits(o,t.classes.XDSResource),o}())});

/*MyWork*/
"use strict";cf.resource("MyWork",function(e,t,r,a){var s,n,o,d,i,l=[];return new e.classes.XDSResource("MyWork",{init:function(t){var r=0,i=0,l=0,u=0,g=0,c=t.get_val("assignments"),v={},m=t.get_val("assignmentExtraData");for(var f in c){(y=c[f]).threadCount>0&&(v[y.nid]=y.threadCount)}var p={};for(var f in m)p[m[f].nid]=m[f];var b=t.state.get("assessments"),k={};for(var f in b){var y;k[(y=b[f]).nid]=y}var x=e.get("gradebook")[t.nid("node")];s=t.get_val("snid"),n=t.get_val("rid"),o=t.get_setting("unit")||"all",d=t.get_setting("type")||"all";var h=x.students[s];!x.activeNid&&x.currentReportingPeriod&&x.setActiveAssessments(x.currentReportingPeriod.nid),h||(x.register.student.call(x,{nid:s,grades:t.get_val("grades"),average:t.get_val("Average"),rid:n}),h=x.students[s],x.normalizeAll(h));h.average,h.normalized,h.grades;var _=x.activeAssessments;x.calculateStudentWeighting(s);for(var A in _){var C=A;A=e.extend({},_[A]);var P=this.utils.classifyAssessment(t,C,A,h,k,o,d,p[C]);if(!1!==P){P=Object.keys(P);var M=!0,W=!1,w=a;try{for(var S,T=P[Symbol.iterator]();!(M=(S=T.next()).done);M=!0){switch(S.value){case"incomplete":i++;break;case"upcoming":r++;break;case"graded":u++;break;case"overdue":g++;break;default:l++}}}catch(e){W=!0,w=e}finally{try{M||null==T.return||T.return()}finally{if(W)throw w}}}}t.state.set({numIncompleteAssessments:i,numUpcomingAssessments:r,numGradedAssessments:u,numUngradedAssessments:l,numOverdueAssessments:g})},assessmentRollup:function(e){e.data={overdue:{noverdue:e.state.get("numOverdueAssessments")||"0"},incomplete:{nincomplete:e.state.get("numIncompleteAssessments")||"0"},ungraded:{nungraded:e.state.get("numUngradedAssessments")||"0"},graded:{ngraded:e.state.get("numGradedAssessments")||"0"},upcoming:{nupcoming:e.state.get("numUpcomingAssessments")||"0"}}},previousReportingPeriodSummary:function(t){var r=e.get("gradebook")[t.nid("node")];if(!r.currentReportingPeriod||r.activeNid==r.currentReportingPeriod.nid||r.activeNid==t.nid("node")||-1==r.activeNid)return!1;t.inherit("container")},rollupChiclet:function(e){var t=e.genSubClass("activated").trim(),r=e.genSubClass("unactivated").trim();e.arg("interactive")||void 0===e.arg("interactive")?(e.on("click",function(e){e.dom().hasClass(t)?(e.removeClass(t),$(".xds-MyWork-rollupChiclet").removeClass(r)):($(".".concat(t)).removeClass(t),$(".xds-MyWork-rollupChiclet").addClass(r),e.removeClass(r),e.addClass(t))}),e.attr("data-interactive",!0)):e.attr("data-interactive",!1)}},{clearUnreadGrades:function(t){t.get_arg("anid")&&t.get_arg("anid"),l.length>0&&t.has_write(t.get_arg("xdsClearUnread"))&&e.post({url:{xds:t.get_arg("xdsClearUnread"),nid:e.nodePath([s,n,t.nid("node")])},data:{nid:l.join(",")}}),l=[]},toggleSelectedPane:function(e,t,r){e.event("MyWork.events.loadPane",{xds:e.args.xds})},loadPane:function(e,t,r){if(e.args.xds&&(i=e.args.xds),e.get_setting("MyWork_active")){var a=e.get_setting("MyWork_active"),s=e.target("*subnav-".concat(a));s&&s.xdo&&s.xdo.arg("xds")&&(i=s.xdo.arg("xds"),e.state.top().set("tabbedform-tabTitle",s.xdo.arg("title")))}var n={target:"*loader",xds:i,unit:"all",type:"all",noProps:!0,student:e.get_val("snid"),model:e.get_setting("model")||e.global("modelNid"),scrollTarget:e.get_arg("scrollTarget")};e.get_arg("filter")&&(n.filter=e.get_arg("filter")),"MyWorkAttendance"!==i&&"MultiPerspectiveChart"!==i||(n.students=e.get_val("snid")),i&&(e.newEvent("loadxds",n),e.newEvent("MyWork.setupSelectedPane"))},assessmentPaneOrScroll:function(e,t,r){var a=e.target(".MyWorkAssessmentPane").xdo;a?a.trigger("toggleFilter",{filter:e.get_arg("filter")}):e.newEvent("MyWork.loadPane",{xds:"MyWorkAssessmentPane",filter:e.get_arg("filter")})},setupSelectedPane:function(e,t,r){var a;switch(i=i||e.get_arg("defaultPaneXds"),i=e.get_setting("pane")?e.get_setting("pane"):i){case"MyWorkChart":a="graph";break;case"MyWorkAttendance":a="attendance";break;case"MyWorkReportCard":a="reportcards";break;case"MyWorkExpectations":a="standards";break;case"MyWorkAssessmentPane":a="assessments";break;default:a="graph",i="MyWorkChart"}var s="*subnav-"+a;return e.root_xdo().dom().find(".xds-simpleTab-selected").removeClass("xds-simpleTab-selected"),e.get_xdo(s).dom().addClass("xds-simpleTab-selected"),s},setupInitialPane:function(t,r,a){var s=e.get_func("MyWork.events.setupSelectedPane")(t,r,a);t.get_xdo(s).trigger("click")},newDataReload:function(e,t,r){e.newEvent("reload",{pane:i})}},{classifyAssessment:function(t,r,s,n,o,d,i,u){var g={},c=n.normalized||{},v=n.grades||{};if(3==s.state&&!t.has_role("Teacher"))return!1;if("all"!=d&&d!=s.thread)return!1;if("all"!=i&&i!=s.type)return!1;var m=e.parseDate(s.adate),f=new Date,p=c[s.nid],b=v[s.nid];l.push(r);var k=e.extend({},o[r]);return u&&(k=e.extend(k,u)),!(s&&s.individualAssessment&&s.studentAssigned&&!s.studentAssigned[n.nid])&&(m>f&&p&&(!1===p.average||p.average===a||!1===p.published)&&(g.upcoming=!0),p&&!1!==p.average&&p.average!==a?g.graded=!0:g.ungraded=!0,(k&&(-1==k.taskStatus||1==k.taskStatus||k.submitButton&&k.submitButton.calc&&4===k.submitButton.calc.button)||b&&(2==b.r||4==b.r||5==b.r||6==b.r||7==b.r))&&(g.incomplete=!0,(-1==k.taskStatus||b&&b.r&&2==b.r)&&(g.overdue=!0)),g)}},{},{},{default:{chiclet:{width:"110px",overdue:{"background-color":"red","foreground-color":"white"},incomplete:{"background-color":"var(--edsby-blue)","foreground-color":"white"},upcoming:{"background-color":"var(--edsby-complementary-foreground-colour-active)","foreground-color":"var(--ui-body-foreground-colour)/*bodyText*/"},default:{"background-color":"white","mobile-background-colour":"var(--ui-container-subsidiary-background-colour)","foreground-color":"var(--ui-body-foreground-colour)/*bodyText*/"},"number-size":"32px","number-weight":"bold"}},dark:{chiclet:{default:{"background-color":"var(--ui-container-background-colour)","foreground-color":"var(--ui-body-foreground-colour)/*bodyText*/"}}}})});
});